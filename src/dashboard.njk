---
layout: layouts/base.njk
title: Dashboard
---
<div class="grid gap-6 md:grid-cols-2">
  <section class="card">
    <h2 id="greeting" class="text-xl font-semibold">Dashboard</h2>
    <p class="muted">After you sign in, this page will show your tasks and expiring documents.</p>
    <div class="mt-4">
      <form method="post" action="/.netlify/functions/logout">
        <button class="btn" type="submit">Sign out</button>
      </form>
    </div>
  </section>
  <section class="card">
    <h3 class="text-lg font-semibold">Quick actions</h3>
    <div class="mt-3 flex flex-wrap gap-2">
      <a class="btn" href="/tasks/">Add task</a>
      <a class="btn-secondary" href="/rooms/">Add room</a>
    </div>
  </section>
</div>
<script>
  (async () => {
    const res = await fetch('/.netlify/functions/whoami');
    if (res.status === 401) {
      location.href = '/';
      return;
    }
    const j = await res.json();
    const h2 = document.getElementById('greeting');
    if (h2 && j?.email) h2.textContent = `Hello, ${j.email}`;
  })();
</script>
